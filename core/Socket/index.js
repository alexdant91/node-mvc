"use strict";require("dotenv").config();var whitelist=["http://localhost:8080","http://192.168.1.105:8080"],server=require("http").createServer(),io=require("socket.io")(server,{cors:{origin:function origin(a,b){-1===whitelist.indexOf(a)?b(new Error("Not allowed by CORS")):b(null,!0)},methods:["GET","POST"],allowedHeaders:["auth"],credentials:!0}});io.use(function(a,b){console.log("auth: ",a.handshake.headers.auth),b()}),io.on("connection",function(a){// sending to the client
console.log("New socket ".concat(a.id)),a.emit("hello",{message:"Can you here me?"}),a.on("hello",function(a){return console.log(a)})}),io.of("/home").on("connection",function(a){console.log("New socket ".concat(a.id," on /home")),a.emit("helloHome",{message:"Can you here me on /home?"})}),server.listen(process.env.APP_SOCKET_PORT,function(){process.env.APP_DEBUG&&debug.success("WS server successfully started on ".concat(env.APP_URL,":").concat(env.APP_SOCKET_PORT,"."),!1)}),module.exports=io;