"use strict";require("dotenv").config();var clear=require("clear"),fs=require("fs"),path=require("path"),chalk=require("chalk"),_require=require("process"),exit=_require.exit,_require2=require("./helpers"),processArgv=_require2.processArgv;clear(),console.log(chalk.green.bold("[NodeMVC]: Generating new Middleware..."));var options=processArgv(),Name=options.name,SubDir=options.subfolder?options.subfolder:"/",ModelName=Name?Name.charAt(0).toUpperCase()+Name.slice(1):process.argv.slice(2).toString().charAt(0).toUpperCase()+process.argv.slice(2).toString().slice(1);ModelName&&""!=ModelName||(console.log(chalk.red.bold("[NodeMVC]: Middleware name required, run `yarn make:middleware [MIDDLEWARE_NAME]`")),exit(0));var MiddlewareTemplate=require("./templates/middleware"),MiddlewareSubPath=path.join(__dirname,"../../../app/Http/Middleware",SubDir);fs.existsSync(MiddlewareSubPath)||fs.mkdirSync(MiddlewareSubPath);var MiddlewarePath=path.join(MiddlewareSubPath,"".concat(ModelName,".js")),MiddlewareCode=MiddlewareTemplate.split("%__MODEL_NAME__%").join(ModelName).split("%__MODEL_MIN_NAME__%").join(ModelName.toLowerCase());// const MiddlewarePath = path.join(__dirname, "../../../app/Http/Middleware/", `${ModelName}.js`);
fs.writeFileSync(MiddlewarePath,MiddlewareCode),console.log(chalk.green.bold("[NodeMVC]: Middleware \"".concat(ModelName,"\" successfully created.")));